<div class="row">
    <div class="col-md-12 mb10" ng-if="hasOAuth && loggedIn">
        <div class="panel panel-default">
            <div class="clickable panel-heading text-center" ng-click="toggleOAuthPanel()" ng-style="oAuthPanelStyle">
                <a class="clickable">oAuth2.0 Authorization Required!</a>
            </div>
            <div class="panel-body" uib-collapse="oAuthClosed">
                <div class="col-sm-12">
                <form role="form">
                    <div class="col-sm-6 form-group mb30">
                        <div class="input-group mb5">
                            <span class="input-group-addon ion ion-person"></span>
                            <input type="text" class="form-control" placeholder="Client ID" ng-model="appVersion.oAuthClientId">
                        </div>

                    </div>
                    <div class="col-sm-6 form-group mb30">
                        <div class="input-group">
                            <span class="input-group-addon ion ion-locked"></span>
                            <input type="text" class="form-control" placeholder="Client Secret" ng-model="appVersion.oauthClientSecret">
                        </div>
                    </div>
                    <div class="col-sm-12">
                        <p class="small text-muted text-uppercase mb5">Scopes</p>
                    </div>
                    <div class="ui-checkbox ui-checkbox-circle scope-checkbox" ng-show="!(selectedScopes.length == 0)">
                        <label class="col-sm-12 mt10" ng-repeat="scope in selectedScopes">
                            <input class="col-sm-2" type="checkbox" ng-model="scope.checked">
                                    <span class="col-sm-12">
                                        <span class="col-sm-12">{{scope.desc}}</span>
                                        <span class="col-sm-12 xsmall text-muted">{{scope.scope}}</span>
                                    </span>
                        </label>
                    </div>
                </form>
                </div>
                <div class="col-sm-12" style="margin-left: 45px">
                    <button class="mt10 btn btn-warning" ng-click="doGrant()" ng-disabled="hasGrant || !appVersion.oauthClientRedirect || appVersion.oauthClientRedirect.length === 0 || !canGrant() || !oAuthConfig.enable_implicit_grant || (appVersion == undefined)">Grant</button>
                    <div class="mt10" ng-show="oAuthConfig.enable_implicit_grant && (!appVersion.oauthClientRedirect || appVersion.oauthClientRedirect.length === 0)">
                        <p class="text-justified text-warning xsmall">
                            The grant button is disabled because the selected Application does not
                            have a OAuth Callback URL defined. Without a callback URL the grant
                            process cannot be completed.
                        </p>
                        <a ui-sref="root.application({orgId: appVersion.application.organization.id, appId: appVersion.application.id, versionId: appVersion.version})">
                            <p class="text-warning xsmall">You can set the Callback URL <span class="text-bold">here</span>.</p>
                        </a>
                    </div>
                    <div class="mt10" ng-show="!oAuthConfig.enable_implicit_grant">
                        <p class="text-justified text-warning xsmall">
                            The grant button is disabled because the service has not enabled
                            the "Implicit Grant" flow. Without this the grant process cannot
                            be completed.
                        </p>
                    </div>
                    <div class="mt10" ng-show="(appVersion == undefined) && oAuthConfig.enable_implicit_grant">
                        <p class="text-justified text-warning xsmall">
                            The grant button is disabled because there is no client ID or
                            client secret available. To enable the grant process, create a
                            contract with this service.
                        </p>
                    </div>
                </div>
            </div>
        </div><!-- end authorization panel -->
    </div>

    <div class="col-md-12">
        <div class="panel panel-default mb15">
            <div class="panel-heading row">
                <div class="col-sm-6">
                    <h2>Swagger specification</h2>
                    <div>
                        <span class="btn btn-xs btn-info" ng-click="docDownloader.fetchWithServiceVersion(serviceVersion)">Download</span>
                    </div>
                </div>
                <div class="col-sm-6">
                    <div class="text-right" ng-if="contractApps.length === 0" style="margin-top: 25px">
                        <p>No contracts exist for this service.</p>
                        <p>Create one using the button above.</p>
                    </div>
                    <div class="text-center right" style="margin-top: 25px" ng-if="contractApps.length > 0">
                        <p class="xsmall">Contract to be used for testing</p>
                        <div class="btn-group dropdown" uib-dropdown>
                            <button type="button" class="btn btn-line-info dropdown-toggle" uib-dropdown-toggle>
                                <span class="xsmall" ng-if="selectedContract">{{selectedContract.appOrganizationName}}<br></span>
                                <b>{{selectedContract ? selectedContract.appName + ' - ' + selectedContract.appVersion : 'Please select a contract'}}<span class="caret"></span></b>
                            </button>
                            <ul class="dropdown-menu dropdown-menu-right">
                                <li ng-repeat="contract in contractApps | orderBy:'createdOn'" ng-click="selectContract(contract)">
                                    <a><span class="xsmall">{{contract.appOrganizationName}}</span><br><b>{{contract.appName}} - {{contract.appVersion}}</b></a>
                                </li>
                            </ul>
                        </div>
                    </div>

                </div>

            </div>
            <div class="panel-body">
                <div swagger-ui input-type="json"
                     template-url="views/templates/swagger/main.html" input="currentDefinitionSpec"
                     api-explorer="true" apikey="docTester.apikey"
                     custom-headers="customHeaders"
                     jwt-enabled="jwtEnabled" logged-in="loggedIn" ng-if="!isLoading">
                </div>
                <div class="text-center" ng-if="isLoading">
                    <span class="fa fa-spinner fa-pulse fa-4x"></span>
                </div>
            </div>
        </div>
    </div><!-- end Swagger Documentation panel -->

    <!--<div class="col-md-12">-->
        <!--&lt;!&ndash; Custom Headers panel &ndash;&gt;-->
        <!--<div class="panel panel-default mb15" ng-if="loggedIn">-->
            <!--<div class="panel-heading text-center">-->
                <!--Custom Headers-->
            <!--</div>-->
            <!--<div class="panel-body">-->
                <!--<div class="col-sm-12 text-center" ng-if="customHeaders.length === 0">-->
                    <!--<button class="btn btn-default" ng-click="addHeader()">Add Custom Header</button>-->
                <!--</div>-->
                <!--<uib-accordion class="accordion-panel" ng-show="customHeaders.length > 0">-->
                    <!--<div ng-repeat="header in customHeaders">-->
                        <!--<auth-accordion-group heading="{{header.name.length > 0 ? header.name : 'Custom Header'}}">-->
                            <!--<form role="form" class="form">-->
                                <!--<div class="form-group">-->
                                    <!--<div class="input-group mb5">-->
                                        <!--<span class="input-group-addon fa fa-fw fa-header"></span>-->
                                        <!--<input type="text" class="form-control" placeholder="Header Name" ng-model="header.name">-->
                                    <!--</div>-->
                                    <!--<div class="input-group">-->
                                        <!--<span class="input-group-addon fa fa-fw fa-envelope-o"></span>-->
                                        <!--<input type="text" class="form-control" placeholder="Header Value" ng-model="header.value">-->
                                    <!--</div>-->
                                <!--</div>-->
                            <!--</form>-->
                            <!--<p class="btn btn-danger right btn-xs" tooltip-popup-delay="300" tooltip-placement="bottom" uib-tooltip="Remove Header" ng-click="removeHeader(header)"><span class="fa fa-trash"></span></p>-->
                        <!--</auth-accordion-group>-->
                    <!--</div>-->
                    <!--<p class="btn btn-default btn-xs right fa fa-plus" tooltip-popup-delay="300" tooltip-placement="bottom" uib-tooltip="Add Header" ng-click="addHeader()"></p>-->
                <!--</uib-accordion>-->
            <!--</div>-->
        <!--</div>&lt;!&ndash; end Custom Headers panel &ndash;&gt;-->
    <!--</div>-->

</div>
